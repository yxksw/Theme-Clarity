const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["fancybox.DposC618.js","fancybox.css","vendor.BvSWQaui.js","vendor.css"])))=>i.map(i=>d[i]);
import{Q as e,m as t,a as n}from"./vendor.BvSWQaui.js";import{d as o,A as i,y as s,u as a,k as c,G as r}from"./preact.59cp49z-.js";function l({groups:e}){const[t,n]=o("all"),[c,r]=o([]),[l,d]=o(20),u=i(null),m=e.flatMap(e=>e.photos.map(t=>({...t,groupName:e.name}))),h="all"===t?m:m.filter(e=>e.groupName===t);s(()=>{r(h.slice(0,l))},[t,l,e]),s(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&l<h.length&&d(e=>Math.min(e+12,h.length))},{rootMargin:"200px"});return u.current&&e.observe(u.current),()=>e.disconnect()},[h.length,l]);const p=e=>{n(e),d(20)};return a("div",{class:"photo-gallery",children:[a("div",{class:"photo-tabs",children:[a("button",{class:"photo-tab "+("all"===t?"active":""),onClick:()=>p("all"),children:[a("span",{class:"icon-[ph--squares-four-bold]"}),"å…¨éƒ¨",a("span",{class:"tab-count",children:m.length})]}),e.map(e=>a("button",{class:"photo-tab "+(t===e.name?"active":""),onClick:()=>p(e.name),children:[a("span",{class:"icon-[ph--folder-bold]"}),e.displayName,a("span",{class:"tab-count",children:e.photoCount})]},e.name))]}),a("div",{class:"photo-masonry",children:c.map((e,t)=>a("figure",{class:"photo-item",onClick:()=>((e,t)=>{const n=h.map(e=>({src:e.url,caption:e.displayName||""})),o=()=>{window.Fancybox&&window.Fancybox.show(n,{startIndex:t})};if(window.Fancybox)return void o();window.__clarityFancyboxLoading||(window.__clarityFancyboxLoading=D().catch(()=>{}).finally(()=>{window.__clarityFancyboxLoading=null}));window.__clarityFancyboxLoading&&window.__clarityFancyboxLoading.then(()=>{o()})})(0,t),children:[a("img",{src:e.cover||e.url,alt:e.displayName||"",loading:"lazy",decoding:"async"}),e.displayName&&a("figcaption",{children:e.displayName})]},`${e.groupName}-${t}`))}),l<h.length&&a("div",{ref:u,class:"photo-loader",children:[a("span",{class:"icon-[ph--spinner-bold] animate-spin"}),"åŠ è½½ä¸­..."]}),0===h.length&&a("div",{class:"empty-state",children:[a("span",{class:"icon-[ph--image-broken-bold]"}),a("p",{children:"æš‚æ— å›¾ç‰‡"})]}),l>=h.length&&h.length>0&&a("div",{class:"photo-end",children:["å·²åŠ è½½å…¨éƒ¨ ",h.length," å¼ å›¾ç‰‡"]})]})}const d="weather_cache";function u({apiKey:e,iconBase:t}){const[n,i]=o("loading"),[c,r]=o(null),[l,u]=o(document.documentElement.classList.contains("dark")),m=async(t=!1)=>{if(!t){const e=(()=>{try{const e=localStorage.getItem(d);if(e){const{data:t,timestamp:n}=JSON.parse(e);if(Date.now()-n<36e5)return t}}catch{}return null})();if(e)return r(e),void i("success")}i("loading");try{const t=await fetch("https://api.ipify.cn/?format=json"),n=await t.json();if(!n.ip)throw new Error("IP Error");const o=await fetch(`https://api.seniverse.com/v3/weather/now.json?key=${e}&location=${n.ip}&language=zh-Hans&unit=c`),s=await o.json();if(!s.results||!s.results[0])throw new Error("Weather API Error");{const e=s.results[0],t=new Date(e.last_update),n={temperature:e.now.temperature,text:e.now.text,code:e.now.code,city:e.location.name,updateTime:`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")} æ›´æ–°`};r(n),(e=>{try{const t={data:e,timestamp:Date.now()};localStorage.setItem(d,JSON.stringify(t))}catch{}})(n),i("success")}}catch(n){i("error")}};return s(()=>{m();const e=new MutationObserver(()=>{u(document.documentElement.classList.contains("dark"))});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[]),a("div",{class:"weather-card",children:["loading"===n&&a("div",{class:"weather-loading",children:[a("span",{class:"icon-[ph--spinner] animate-spin"}),a("span",{children:"èŽ·å–å¤©æ°”ä¸­..."})]}),"error"===n&&a("div",{class:"weather-error",onClick:()=>m(!0),children:[a("span",{class:"icon-[ph--arrow-clockwise-bold]"}),a("span",{children:"ç‚¹å‡»é‡è¯•"})]}),"success"===n&&c&&a("div",{class:"weather-content",children:[a("div",{class:"weather-left",children:a("img",{class:"weather-icon",src:(h=c.code,`${t}/${l?"black":"white"}/${h}@2x.png`),alt:c.text})}),a("div",{class:"weather-right",children:[a("div",{class:"weather-main",children:[a("span",{class:"temp-value",children:c.temperature}),a("span",{class:"temp-unit",children:"Â°C"}),a("span",{class:"weather-text",children:c.text})]}),a("div",{class:"weather-meta",children:[a("span",{class:"weather-city",children:[a("span",{class:"icon-[ph--map-pin-bold]"}),a("span",{children:c.city})]}),a("span",{class:"weather-update",children:[a("span",{class:"icon-[ph--clock-bold]"}),a("span",{children:c.updateTime})]})]})]})]})]});var h}function m({url:e,name:t,logo:n,desc:i,onClose:c}){const[r,l]=o(5),[d,u]=o(!1);s(()=>{const e=document.createElement("meta");return e.name="robots",e.content="noindex, nofollow",e.id="shuttle-robots-meta",document.head.appendChild(e),()=>document.getElementById("shuttle-robots-meta")?.remove()},[]);const m=()=>{d||(u(!0),window.open(e,"_blank","noopener,noreferrer"),setTimeout(c,200))};s(()=>{if(r<=0)return void m();const e=setTimeout(()=>l(e=>e-1),1e3);return()=>clearTimeout(e)},[r]);const h=(3-r)/3*100;return a("div",{className:"shuttle",onClick:e=>e.target===e.currentTarget&&c(),children:a("div",{className:"shuttle__card",children:[a("div",{className:"shuttle__decor shuttle__decor--1"}),a("div",{className:"shuttle__decor shuttle__decor--2"}),a("button",{className:"shuttle__close",onClick:c,"aria-label":"å…³é—­",children:a("svg",{viewBox:"0 0 24 24",children:a("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round"})})}),a("div",{className:"shuttle__header",children:a("span",{className:"shuttle__badge",children:[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a("path",{d:"M13 10V3L4 14h7v7l9-11h-7z",strokeLinecap:"round",strokeLinejoin:"round"})}),"éšæœºå‹é“¾"]})}),a("div",{className:"shuttle__site",children:[a("div",{className:"shuttle__icon",children:n?a("img",{src:n,alt:"",onError:e=>e.target.replaceWith(document.createTextNode("ðŸ”—"))}):a("span",{children:"ðŸ”—"})}),a("div",{className:"shuttle__info",children:[a("h3",{className:"shuttle__name",children:t}),i&&a("p",{className:"shuttle__desc",children:i})]})]}),a("div",{className:"shuttle__action",children:[a("div",{className:"shuttle__timer",children:[a("svg",{className:"shuttle__ring",viewBox:"0 0 36 36",children:[a("circle",{cx:"18",cy:"18",r:"16",fill:"none",strokeWidth:"2"}),a("circle",{cx:"18",cy:"18",r:"16",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"100",style:{strokeDashoffset:100-h}})]}),a("span",{className:"shuttle__count",children:r})]}),a("button",{className:"shuttle__btn",onClick:m,disabled:d,children:[d?"è·³è½¬ä¸­...":"ç«‹å³å‰å¾€",a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a("path",{d:"M5 12h14m-7-7l7 7-7 7",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})})}const h={tip:{icon:"icon-[ph--notepad-bold]",color:"#3A7",title:"æé†’"},info:{icon:"icon-[ph--info-bold]",color:"var(--c-text-1)",title:"ä¿¡æ¯"},question:{icon:"icon-[ph--question-bold]",color:"#3AF",title:"é—®é¢˜"},warning:{icon:"icon-[ph--warning-bold]",color:"#F80",title:"è­¦å‘Š"},error:{icon:"icon-[ph--x-circle-bold]",color:"#F33",title:"é”™è¯¯"}},p=({type:e="tip",title:t,card:n=!1,gradient:o=!0,children:i})=>{const s=h[e]||h.tip,c=["c-alert",n?"card":"",o?"":"no-gradient"].filter(Boolean).join(" ");return a("div",{class:c,style:{"--c-primary":s.color},children:[a("div",{class:"c-alert-title",children:[a("span",{class:s.icon}),t||s.title]}),a("div",{class:"c-alert-body",children:i})]})},g=({tabs:e,center:t,active:n=1,children:i})=>{const[s,c]=o(n),r=Array.isArray(i)?i:[i];return a("div",{class:t?"center":"",children:[a("div",{class:"c-tabs",children:e.map((e,t)=>a("button",{class:s===t+1?"active":"",onClick:()=>c(t+1),children:e},t))}),a("div",{class:"c-tab-content",children:r.map((e,t)=>a("div",{class:"c-tab-panel "+(s===t+1?"active":""),children:e},t))})]})},f=({code:e,prompt:t="$"})=>{const[n,i]=o(!1);return a("code",{class:"c-copy",children:[!0!==t&&""!==t&&a("span",{class:"c-copy-prompt",children:t}),a("div",{class:"c-copy-code",children:e}),a("button",{class:"c-copy-btn",onClick:async()=>{try{await navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)}catch(t){}},"aria-label":"å¤åˆ¶",children:a("span",{class:n?"icon-[ph--check-bold]":"icon-[ph--copy-bold]"})})]})},y=({title:e,open:t,children:n})=>a("details",{class:"c-folding",open:t,children:[a("summary",{children:e}),a("div",{class:"c-folding-detail",children:n})]}),w=({tip:e,children:t})=>a("span",{class:"c-tip","data-tip":e,children:t}),v=({children:e})=>a("span",{class:"c-blur",children:e}),b=({items:e})=>a("dl",{class:"c-timeline",children:e.map((e,t)=>a(c,{children:[a("dt",{children:e.time},`t${t}`),a("dd",{class:"card",dangerouslySetInnerHTML:{__html:e.content}},`c${t}`)]}))}),k=({icon:e,children:t})=>a("div",{class:"c-quote title-like",children:[a("div",{class:"c-quote-icon",children:a("span",e?{children:e}:{class:"icon-[ph--chat-centered-text-duotone]"})}),a("div",{class:"c-quote-content",children:t})]}),S=({items:e})=>a("dl",{class:"c-chat",children:e.map((e,t)=>a(c,{children:[a("dt",{class:e.self?"self":"",children:e.name},`n${t}`),a("dd",{dangerouslySetInnerHTML:{__html:e.content}},`c${t}`)]}))}),L=({text:e,code:t,cmd:n,ctrl:o,shift:i,alt:s})=>{const c="undefined"!=typeof navigator&&/mac/i.test(navigator.userAgent),r=[];n&&r.push(c?"âŒ˜":"Ctrl"),o&&!n&&r.push(c?"âŒƒ":"Ctrl"),i&&r.push(c?"â‡§":"Shift"),s&&r.push(c?"âŒ¥":"Alt"),t&&r.push(t);const l=e||r.join(c?"":"+");return a("kbd",{class:"c-key",children:l})},E=({children:e})=>a("div",{class:"c-card-list",children:e}),_=({src:e,caption:t,width:n,height:o})=>a("figure",{class:"c-pic",children:[a("img",{src:e,alt:t||"",style:{width:n,height:o}}),t&&a("figcaption",{children:t})]}),N=({value:e,max:t=100,color:n,label:o,showPercent:i=!0})=>{const s=Math.min(100,Math.max(0,e/t*100));return a("div",{class:"c-progress",children:[o&&a("div",{class:"c-progress-label",children:o}),a("div",{class:"c-progress-bar",style:{"--c-progress-color":n},children:a("div",{class:"c-progress-fill",style:{width:`${s}%`}})}),i&&a("div",{class:"c-progress-text",children:[Math.round(s),"%"]})]})},I=["ðŸ•›","ðŸ•§","ðŸ•","ðŸ•œ","ðŸ•‘","ðŸ•","ðŸ•’","ðŸ•ž","ðŸ•“","ðŸ•Ÿ","ðŸ•”","ðŸ• ","ðŸ••","ðŸ•¡","ðŸ•–","ðŸ•¢","ðŸ•—","ðŸ•£","ðŸ•˜","ðŸ•¤","ðŸ•™","ðŸ•¥","ðŸ•š","ðŸ•¦"],C=()=>{const[e,t]=o("ðŸ•›");return s(()=>{const e=()=>{const e=new Date,n=2*e.getHours()+Math.round(e.getMinutes()/30);t(I[n%I.length])};e();const n=setInterval(e,6e4);return()=>clearInterval(n)},[]),a("span",{class:"c-emoji-clock",children:e})},x=({cols:e=2,gap:t="1rem",children:n})=>a("div",{class:"c-split",style:{gridTemplateColumns:"number"==typeof e?`repeat(${e}, 1fr)`:`repeat(auto-fill, minmax(${e}, 1fr))`,gap:t},children:n}),T=({items:e})=>a("ol",{class:"c-stepper",children:e.map((e,t)=>a("li",{class:"c-stepper-item",children:[a("div",{class:"c-stepper-marker",children:t+1}),a("div",{class:"c-stepper-content",children:[a("div",{class:"c-stepper-title",children:e.title}),a("div",{class:"c-stepper-body",dangerouslySetInnerHTML:{__html:e.content}})]})]},t))}),q=({color:e="yellow",rotate:t,children:n})=>a("div",{class:`c-note c-note-${e} ${t?"rotate":""}`,children:n});function A(e){const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];let i=o.value;""===i||"true"===i?i=!0:"false"===i?i=!1:isNaN(Number(i))||""===i||(i=Number(i)),t[o.name.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())]=i}return t}function M(e,t){const n=document.createElement("div");e.replaceWith(n),r(t,n)}function $(){document.querySelectorAll("c-alert").forEach(e=>{const t=A(e),n=e.innerHTML;M(e,a(p,{...t,children:a("div",{dangerouslySetInnerHTML:{__html:n}})}))}),document.querySelectorAll("c-tab").forEach(e=>{const t=A(e),n=(t.tabs||"").split(",").map(e=>e.trim()),o=Array.from(e.querySelectorAll("c-tab-panel")).map(e=>e.innerHTML);M(e,a(g,{tabs:n,center:t.center,active:t.active,children:o.map((e,t)=>a("div",{dangerouslySetInnerHTML:{__html:e}},t))}))}),document.querySelectorAll("c-copy").forEach(e=>{const t=A(e),n=t.code||e.textContent||"";M(e,a(f,{code:n,prompt:t.prompt}))}),document.querySelectorAll("c-folding").forEach(e=>{const t=A(e),n=e.innerHTML;M(e,a(y,{title:t.title,open:t.open,children:a("div",{dangerouslySetInnerHTML:{__html:n}})}))}),document.querySelectorAll("c-tip").forEach(e=>{const t=A(e),n=e.innerHTML,o=document.createElement("span");e.replaceWith(o),r(a(w,{tip:t.tip,children:a("span",{dangerouslySetInnerHTML:{__html:n}})}),o)}),document.querySelectorAll("c-blur").forEach(e=>{const t=e.innerHTML,n=document.createElement("span");e.replaceWith(n),r(a(v,{children:a("span",{dangerouslySetInnerHTML:{__html:t}})}),n)}),document.querySelectorAll("c-timeline").forEach(e=>{const t=Array.from(e.querySelectorAll("c-timeline-item")).map(e=>({time:e.getAttribute("time")||"",content:e.innerHTML}));M(e,a(b,{items:t}))}),document.querySelectorAll("c-quote").forEach(e=>{const t=A(e),n=e.innerHTML;M(e,a(k,{icon:t.icon,children:a("div",{dangerouslySetInnerHTML:{__html:n}})}))}),document.querySelectorAll("c-chat").forEach(e=>{const t=Array.from(e.querySelectorAll("c-chat-item")).map(e=>({name:e.getAttribute("name")||"",content:e.innerHTML,self:e.hasAttribute("self")}));M(e,a(S,{items:t}))}),document.querySelectorAll("c-key").forEach(e=>{const t=A(e),n=document.createElement("span");e.replaceWith(n),r(a(L,{...t}),n)}),document.querySelectorAll("c-card-list").forEach(e=>{const t=e.innerHTML;M(e,a(E,{children:a("div",{dangerouslySetInnerHTML:{__html:t}})}))}),document.querySelectorAll("c-pic").forEach(e=>{const t=A(e);M(e,a(_,{src:t.src,caption:t.caption,width:t.width,height:t.height}))}),document.querySelectorAll("c-progress").forEach(e=>{const t=A(e);M(e,a(N,{value:t.value,max:t.max,color:t.color,label:t.label,showPercent:!1!==t.showPercent}))}),document.querySelectorAll("c-emoji-clock").forEach(e=>{const t=document.createElement("span");e.replaceWith(t),r(a(C,{}),t)}),document.querySelectorAll("c-split").forEach(e=>{const t=A(e),n=Array.from(e.children).map((e,t)=>a("div",{dangerouslySetInnerHTML:{__html:e.innerHTML}},t));M(e,a(x,{cols:t.cols,gap:t.gap,children:n}))}),document.querySelectorAll("c-stepper").forEach(e=>{const t=Array.from(e.querySelectorAll("c-step")).map(e=>({title:e.getAttribute("title")||"",content:e.innerHTML}));M(e,a(T,{items:t}))}),document.querySelectorAll("c-note").forEach(e=>{const t=A(e),n=e.innerHTML;M(e,a(q,{color:t.color,rotate:t.rotate,children:a("div",{dangerouslySetInnerHTML:{__html:n}})}))})}"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",$):$());let B=null;"undefined"!=typeof window&&(window.openShuttle=function(e){if(B)return;B=document.createElement("div"),B.id="shuttle-root",document.body.appendChild(B),document.body.style.overflow="hidden",r(a(m,{...e,onClose:()=>{B&&(r(null,B),B.remove(),B=null,document.body.style.overflow="")}}),B)});const P={},H=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");o=e(t.map(e=>{if((e=function(e){return"/usr/themes/clarity/assets/dist/"+e}(e))in P)return;P[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,i&&o.setAttribute("nonce",i),document.head.appendChild(o),t?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},U={Hash:!1,Thumbs:{showOnStart:!0},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}},j=["logo","avatar","emoji","icon","no-lightbox"];async function D(){await H(()=>import("./fancybox.DposC618.js").then(e=>e.f),__vite__mapDeps([0,1]));const{Fancybox:e}=await H(async()=>{const{Fancybox:e}=await import("./fancybox.DposC618.js").then(e=>e.i);return{Fancybox:e}},__vite__mapDeps([0,1]));window.Fancybox=e;e.destroy();const t=[];[".article img",".moment-media img",".moment-text img",".comment-content img",".link-info img",".gallery-item img"].forEach(e=>{document.querySelectorAll(e).forEach(e=>{const n=e;(function(e){return j.some(t=>e.classList.contains(t))})(n)||t.includes(n)||t.push(n)})}),t.forEach(n=>{n.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();const i=t.map(e=>({src:e.getAttribute("src")||e.src,type:"image"}));e.show(i,{...U,startIndex:t.indexOf(n)})})})}let O=!1,W=0;function z(){const e=document.getElementById("link-submit-modal");e&&(e.classList.add("show"),document.body.style.overflow="hidden",J(),"captcha"===window.linkSubmitConfig?.verifyType&&K())}function F(){const e=document.getElementById("link-submit-modal");e&&(e.classList.remove("show"),document.body.style.overflow="")}async function R(e){if(e.preventDefault(),!window.LinksSubmit)return;const t=document.getElementById("link-submit-form"),n=new FormData(t),o=window.linkSubmitConfig,i={displayName:n.get("displayName"),url:n.get("url"),logo:n.get("logo")||void 0,email:n.get("email"),description:n.get("description")||void 0,linkPageUrl:n.get("linkPageUrl")||void 0,groupName:n.get("groupName")||void 0,rssUrl:n.get("rssUrl")||void 0};let s="";const a=o?.verifyType||"email";if("email"===a){if(s=n.get("verifyCode")||"",!s)return void X("è¯·è¾“å…¥é‚®ç®±éªŒè¯ç ","error")}else if("captcha"===a&&(s=n.get("captcha")||"",!s))return void X("è¯·è¾“å…¥å›¾å½¢éªŒè¯ç ","error");const c=document.getElementById("submit-btn"),r=c?.querySelector("span:first-child"),l=c?.querySelector("span:last-child");if(!c||!r||!l)return;const d=r.className,u=l.textContent||"";r.className="icon-[ph--spinner] animate-spin",l.textContent="æäº¤ä¸­...",c.disabled=!0;try{const e=await window.LinksSubmit.submit(i,s,"none"===a?void 0:a);if(200!==e.code)throw{msg:e.msg};X(e.msg||"æäº¤æˆåŠŸï¼è¯·ç­‰å¾…å®¡æ ¸","success"),t.reset(),setTimeout(()=>{F()},2e3)}catch(m){X(m.msg||"æäº¤å¤±è´¥","error"),"captcha"===a&&K()}finally{r.className=d,l.textContent=u,c.disabled=!1}}function V(){const e=document.getElementById("link-update-modal");e&&(e.classList.add("show"),document.body.style.overflow="hidden",J("update"),"captcha"===window.linkSubmitConfig?.verifyType&&K("update"))}function Y(){const e=document.getElementById("link-update-modal");e&&(e.classList.remove("show"),document.body.style.overflow="")}async function J(e="submit"){if(window.LinksSubmit)try{const t=await window.LinksSubmit.getLinkGroups(),n="update"===e?"update-link-group":"link-group",o="update"===e?"update-link-group-wrapper":"link-group-wrapper",i=document.getElementById(n),s=document.getElementById(o);t&&t.length>0&&i&&s&&(i.innerHTML='<option value="">é»˜è®¤åˆ†ç»„</option>',t.forEach(e=>{const t=document.createElement("option");t.value=e.groupId,t.textContent=e.groupName,i.appendChild(t)}),s.style.display="")}catch(t){}}function K(e="submit"){if(!window.LinksSubmit)return;const t="update"===e?"update-captcha-img":"captcha-img",n=document.getElementById(t);n&&(n.src=window.LinksSubmit.getCaptchaUrl())}function X(e,t="info",n="submit"){const o="update"===n?"update-submit-message":"submit-message",i="update"===n?".link-update-content":".link-submit-content",s=document.getElementById(o);if(s){const n={success:"âœ“",error:"âœ•",info:"i"};s.innerHTML=`\n      <span class="msg-icon">${n[t]}</span>\n      <span class="msg-text">${e}</span>\n    `,s.className=`submit-message ${t}`,s.style.display="flex";const o=document.querySelector(i);o&&o.scrollTo({top:0,behavior:"smooth"});setTimeout(()=>{s.style.display="none"},"success"===t?8e3:5e3)}}async function Q(e){if(e.preventDefault(),!window.LinksSubmit)return;const t=document.getElementById("link-update-form"),n=new FormData(t),o=window.linkSubmitConfig,i={oldUrl:n.get("oldUrl"),displayName:n.get("displayName"),url:n.get("url"),logo:n.get("logo")||void 0,email:n.get("email"),description:n.get("description")||void 0,linkPageUrl:n.get("linkPageUrl")||void 0,groupName:n.get("groupName")||void 0,rssUrl:n.get("rssUrl")||void 0};let s="";const a=o?.verifyType||"email";if("email"===a){if(s=n.get("verifyCode")||"",!s)return void X("è¯·è¾“å…¥é‚®ç®±éªŒè¯ç ","error","update")}else if("captcha"===a&&(s=n.get("captcha")||"",!s))return void X("è¯·è¾“å…¥å›¾å½¢éªŒè¯ç ","error","update");const c=document.getElementById("update-submit-btn"),r=c?.querySelector("span:first-child"),l=c?.querySelector("span:last-child");if(!c||!r||!l)return;const d=r.className,u=l.textContent||"";r.className="icon-[ph--spinner] animate-spin",l.textContent="æäº¤ä¸­...",c.disabled=!0;try{const e=await window.LinksSubmit.update(i,s,"none"===a?void 0:a);if(200!==e.code)throw{msg:e.msg};X(e.msg||"ä¿®æ”¹æˆåŠŸï¼","success","update"),t.reset(),setTimeout(()=>{Y()},2e3)}catch(m){X(m.msg||"ä¿®æ”¹å¤±è´¥","error","update"),"captcha"===a&&K("update")}finally{r.className=d,l.textContent=u,c.disabled=!1}}function G(){const e=window.linkSubmitConfig;e?.enableSubmit&&(setTimeout(()=>{if(window.LinksSubmit){O=!0;const t=document.getElementById("link-submit-entry");if(t&&(t.style.display=""),e.enableUpdate){const e=document.getElementById("link-update-entry");e&&(e.style.display="")}const n=document.getElementById("link-submit-form");n&&n.addEventListener("submit",R);const o=document.getElementById("link-update-form");o&&o.addEventListener("submit",Q),"#add"===window.location.hash?z():"#edit"===window.location.hash&&V()}},500),window.addEventListener("hashchange",()=>{"#add"===window.location.hash&&O?z():"#edit"===window.location.hash&&O&&V()}))}"undefined"!=typeof window&&(window.openLinkSubmitModal=z,window.closeLinkSubmitModal=F,window.openLinkUpdateModal=V,window.closeLinkUpdateModal=Y,window.autoFetchSiteInfo=async function(){if(!window.LinksSubmit)return;const e=document.getElementById("link-url"),t=e?.value.trim();if(!t)return void X("è¯·å…ˆè¾“å…¥ç½‘ç«™åœ°å€","error");const n=document.getElementById("auto-fetch-btn"),o=n?.querySelector("span:first-child"),i=n?.querySelector("span:last-child");if(!n||!o||!i)return;const s=o.className,a=i.textContent||"";o.className="icon-[ph--spinner] animate-spin",i.textContent="èŽ·å–ä¸­...",n.disabled=!0;try{const e=await window.LinksSubmit.getLinkDetail(t);if(200===e.code&&e.data){const t=e.data,n=document.getElementById("link-name"),o=document.getElementById("link-desc"),i=document.getElementById("link-logo");t.title&&n&&(n.value=t.title),t.description&&o&&(o.value=t.description),(t.image||t.icon)&&i&&(i.value=t.image||t.icon),X("èŽ·å–æˆåŠŸï¼è¯·æ£€æŸ¥å¹¶è¡¥å……ä¿¡æ¯","success")}else X(e.msg||"èŽ·å–å¤±è´¥","error")}catch(c){X(c.msg||"èŽ·å–å¤±è´¥","error")}finally{o.className=s,i.textContent=a,n.disabled=!1}},window.autoFetchUpdateSiteInfo=async function(){if(!window.LinksSubmit)return;const e=document.getElementById("update-link-url"),t=e?.value.trim();if(!t)return void X("è¯·å…ˆè¾“å…¥ç½‘ç«™åœ°å€","error","update");const n=document.getElementById("update-auto-fetch-btn"),o=n?.querySelector("span:first-child"),i=n?.querySelector("span:last-child");if(!n||!o||!i)return;const s=o.className,a=i.textContent||"";o.className="icon-[ph--spinner] animate-spin",i.textContent="èŽ·å–ä¸­...",n.disabled=!0;try{const e=await window.LinksSubmit.getLinkDetail(t);if(200===e.code&&e.data){const t=e.data,n=document.getElementById("update-link-name"),o=document.getElementById("update-link-desc"),i=document.getElementById("update-link-logo");t.title&&n&&(n.value=t.title),t.description&&o&&(o.value=t.description),(t.image||t.icon)&&i&&(i.value=t.image||t.icon),X("èŽ·å–æˆåŠŸï¼è¯·æ£€æŸ¥å¹¶è¡¥å……ä¿¡æ¯","success","update")}else X(e.msg||"èŽ·å–å¤±è´¥","error","update")}catch(c){X(c.msg||"èŽ·å–å¤±è´¥","error","update")}finally{o.className=s,i.textContent=a,n.disabled=!1}},window.sendVerifyCode=async function(){if(!window.LinksSubmit)return;if(W>0)return;const e=document.getElementById("link-email"),t=e?.value.trim();if(!t)return void X("è¯·å…ˆè¾“å…¥é‚®ç®±åœ°å€","error");const n=document.getElementById("send-code-btn"),o=n?.querySelector("span:first-child"),i=n?.querySelector("span:last-child");if(!n||!o||!i)return;const s=o.className;o.className="icon-[ph--spinner] animate-spin",i.textContent="å‘é€ä¸­...",n.disabled=!0;try{const e=await window.LinksSubmit.sendVerifyCode(t);if(200!==e.code)throw{msg:e.msg};{X("éªŒè¯ç å·²å‘é€ï¼Œè¯·æŸ¥æ”¶é‚®ç®±","success"),W=60;const e=setInterval(()=>{W--,i.textContent=`${W}s`,W<=0&&(clearInterval(e),o.className=s,i.textContent="å‘é€éªŒè¯ç ",n.disabled=!1)},1e3)}}catch(a){o.className=s,i.textContent="å‘é€éªŒè¯ç ",n.disabled=!1,X(a.msg||"å‘é€å¤±è´¥","error")}},window.sendUpdateVerifyCode=async function(){if(!window.LinksSubmit)return;if(W>0)return;const e=document.getElementById("update-link-email"),t=e?.value.trim();if(!t)return void X("è¯·å…ˆè¾“å…¥é‚®ç®±åœ°å€","error","update");const n=document.getElementById("update-send-code-btn"),o=n?.querySelector("span:first-child"),i=n?.querySelector("span:last-child");if(!n||!o||!i)return;const s=o.className;o.className="icon-[ph--spinner] animate-spin",i.textContent="å‘é€ä¸­...",n.disabled=!0;try{const e=await window.LinksSubmit.sendVerifyCode(t);if(200!==e.code)throw{msg:e.msg};{X("éªŒè¯ç å·²å‘é€ï¼Œè¯·æŸ¥æ”¶é‚®ç®±","success","update"),W=60;const e=setInterval(()=>{W--,i.textContent=`${W}s`,W<=0&&(clearInterval(e),o.className=s,i.textContent="å‘é€éªŒè¯ç ",n.disabled=!1)},1e3)}}catch(a){o.className=s,i.textContent="å‘é€éªŒè¯ç ",n.disabled=!1,X(a.msg||"å‘é€å¤±è´¥","error","update")}},window.refreshCaptcha=K,window.initLinkSubmit=G);let Z=null;var ee;window.jumpToPage=function(e){const t=e.closest(".page-jump");if(!t)return;const n=t.querySelector(".page-input");if(!n)return;const o=parseInt(n.value),i=parseInt(n.dataset.currentPage||"1"),s=parseInt(n.dataset.totalPages||"1");if(isNaN(o)||o<1||o>s)return void alert("è¯·è¾“å…¥æœ‰æ•ˆçš„é¡µç ");if(o===i)return;const a=window.location.pathname,c=window.location.search,r=new URLSearchParams(c);if(r.has("page"))return r.set("page",String(o)),void(window.location.href=`${a}?${r.toString()}`);if(r.size>0){let e=a.replace(/\/page\/\d+$/,"");return e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1)),void(window.location.href=1===o?`${e||"/"}?${r.toString()}`:`${"/"===e?"":e}/page/${o}?${r.toString()}`)}let l=a.replace(/\/page\/\d+$/,"");l.length>1&&l.endsWith("/")&&(l=l.slice(0,-1)),window.location.href=1===o?l||"/":"/"===l?`/page/${o}`:`${l}/page/${o}`},window.jumpToPageWithPattern=function(e){const t=e.closest(".page-jump");if(!t)return;const n=t.querySelector(".page-input");if(!n)return;const o=parseInt(n.value),i=parseInt(n.dataset.currentPage||"1"),s=parseInt(n.dataset.totalPages||"1"),a=n.dataset.urlPattern||"/page/{page}",c=n.dataset.firstPageUrl||"/";if(isNaN(o)||o<1||o>s)return void alert("è¯·è¾“å…¥æœ‰æ•ˆçš„é¡µç ");if(o===i)return;const r=window.location.search,l=new URLSearchParams(r);let d;if(d=1===o?c:a.replace("{page}",String(o)),l.size>0){const e=d.includes("?")?"&":"?";d=`${d}${e}${l.toString()}`}window.location.href=d},window.mountPhotoGallery=function(e,t){r(a(l,{groups:t}),e)},window.mountWeather=function(e,t,n){r(a(u,{apiKey:t,iconBase:n}),e)},window.generateQRCode=async function(t,n){try{const o=await e.toDataURL(n,{width:160,margin:1}),i=document.createElement("img");i.src=o,i.alt="QR Code",t.innerHTML="",t.appendChild(i)}catch(o){}},window.generatePoster=async function(e,t){const n=await async function(){return Z||(Z=await H(()=>import("./vendor.BvSWQaui.js").then(e=>e.h),__vite__mapDeps([2,3]))),Z.default}(),o=await n(e,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#fff"}),i=document.createElement("a");i.download=`${t||"æµ·æŠ¥"}.png`,i.href=o.toDataURL("image/png"),i.click()},function(e){e.data("themeToggle",()=>({theme:localStorage.getItem("theme")||window.themeConfig?.style?.theme_mode||"system",init(){this.applyTheme(!1),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{"system"===this.theme&&this.applyTheme(!0)})},setTheme(e,t){this.theme=e,localStorage.setItem("theme",e),this.applyTheme(!0,t)},applyTheme(e=!0,t){const n=document.documentElement,o="dark"===this.theme||"system"===this.theme&&window.matchMedia("(prefers-color-scheme: dark)").matches;t&&(n.style.setProperty("--x",t.clientX+"px"),n.style.setProperty("--y",t.clientY+"px"));const i=()=>{o?n.classList.add("dark"):n.classList.remove("dark")};e&&document.startViewTransition?document.startViewTransition(i):i()}}))}(ee=t),function(e){e.data("userAuth",()=>({currentUser:null,showMenu:!1,ready:!1,init(){this.checkLoginStatus()},async checkLoginStatus(){try{const e=await fetch("/apis/api.console.halo.run/v1alpha1/users/-");if(e.ok){const t=await e.json(),n=t.user?.metadata?.name;if(n&&"anonymousUser"!==n){const e=t.roles?.[0]?.metadata?.annotations?.["rbac.authorization.halo.run/display-name"];this.currentUser={name:t.user?.spec?.displayName||n,avatar:t.user?.spec?.avatar,roleDisplayName:e}}else this.currentUser=null}else this.currentUser=null}catch{this.currentUser=null}finally{this.ready=!0}},toggleMenu(){this.showMenu=!this.showMenu},handleClick(){this.toggleMenu()}}))}(ee),function(e){e.data("sidebarControl",()=>({isOpen:!1,toggle(){this.isOpen=!this.isOpen;const e=document.getElementById("z-sidebar"),t=document.getElementById("z-sidebar-bgmask");this.isOpen?(e?.classList.add("show"),t?.classList.remove("hidden")):(e?.classList.remove("show"),t?.classList.add("hidden"))},close(){this.isOpen=!1,document.getElementById("z-sidebar")?.classList.remove("show"),document.getElementById("z-sidebar-bgmask")?.classList.add("hidden")}}))}(ee),function(e){e.data("postLike",()=>({count:0,liked:!1,loading:!1,postName:"",init(){const e=this.$el;if(this.postName=e.dataset.name||"",this.count=parseInt(e.dataset.count||"0",10),this.postName){const e=JSON.parse(localStorage.getItem("liked_posts")||"{}");this.liked=!!e[this.postName]}},async toggleLike(){if(!this.loading&&this.postName&&!this.liked){this.loading=!0;try{if((await fetch("/apis/api.halo.run/v1alpha1/trackers/upvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group:"content.halo.run",plural:"posts",name:this.postName})})).ok){const e=JSON.parse(localStorage.getItem("liked_posts")||"{}");e[this.postName]=!0,localStorage.setItem("liked_posts",JSON.stringify(e)),this.liked=!0,this.count++}}catch(e){}finally{this.loading=!1}}}}))}(ee),function(e){e.data("pagination",(e,t)=>({page:Number(e)||1,total:Number(t)||1,pageArr:[],init(){this.generatePageArr()},generatePageArr(){const e=[];for(let t=1;t<=this.total;t++)1===t||t===this.total||t>=this.page-2&&t<=this.page+2?e.push(t):"..."!==e[e.length-1]&&e.push("...");this.pageArr=e},getPageUrl(e){if("..."===e)return"javascript:void(0)";const t=window.location.pathname,n=window.location.search,o=new URLSearchParams(n);if(o.has("keyword"))return o.set("page",String(e)),`${t}?${o.toString()}`;let i=t.replace(/\/page\/\d+$/,"");return i.length>1&&i.endsWith("/")&&(i=i.slice(0,-1)),1===e?i||"/":"/"===i?`/page/${e}`:`${i}/page/${e}`}}))}(ee),t.plugin(n),window.Alpine=t,t.start(),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),"undefined"!=typeof SearchWidget&&SearchWidget.open())}),document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",e=>{const t=e.target,n=t.closest(".has-dropdown");if(n){const o=n.closest(".has-submenu");if(o){const i=n.querySelector(".dropdown-arrow"),s=n.querySelector(".nav-text");t!==i&&t!==n&&s?.contains(t)||(e.preventDefault(),o.classList.toggle("expanded"))}}}),!0!==window.themeConfig?.custom?.enable_fancybox&&D(),function(){const e=document.getElementById("back-to-top"),t=document.getElementById("pc-back-to-top");if(!e&&!t)return;if(e?._inited)return;e&&(e._inited=!0);const n=()=>{const n=(window.scrollY||document.documentElement.scrollTop||0)>300;e&&(e.style.display=n?"":"none"),t&&(n?t.classList.add("show"):t.classList.remove("show"))};if(n(),window.addEventListener("scroll",n,{passive:!0}),e){let t=null,n=!1;const o=600,i=()=>{n=!1,t=window.setTimeout(()=>{n=!0,history.length>1?history.back():window.scrollTo({top:0,behavior:"smooth"})},o)},s=()=>{null!==t&&(clearTimeout(t),t=null)};e.addEventListener("mousedown",i),e.addEventListener("touchstart",i),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s),e.addEventListener("touchend",s),e.addEventListener("click",()=>{n||window.scrollTo({top:0,behavior:"smooth"})})}}(),G(),document.querySelectorAll("img").forEach(e=>{e.complete?e.classList.add("loaded"):(e.addEventListener("load",()=>e.classList.add("loaded")),e.addEventListener("error",()=>e.classList.add("loaded")))}),function(){if(!window.themeConfig?.custom?.img_alt)return;const e=document.querySelector(".article");if(!e)return;const t=e.querySelectorAll("img");if(!t.length)return;t.forEach(e=>{const t=e.alt?.trim();if(!t)return;if(e.closest(".c-pic, [data-type='gallery']"))return;const n=e.closest("figure");if(n?.querySelector("figcaption"))return;const o=document.createElement("figcaption");if(o.textContent=t,n)n.classList.add("img-caption"),n.appendChild(o);else{const t=document.createElement("figure");t.className="img-caption",e.parentNode?.insertBefore(t,e),t.append(e,o)}})}(),function(){if("false"===document.documentElement.dataset.navActive)return;const e=window.location.pathname;document.querySelectorAll(".sidebar-nav-item, .dropdown-item").forEach(t=>{const n=t,o=n.getAttribute("href");if(!o||"#"===o)return;if(e===o||"/"!==o&&e.startsWith(o)||"/"===o&&"/"===e){n.classList.add("active");const e=n.closest(".has-submenu");e&&e.classList.add("expanded")}})}(),document.querySelectorAll(".scrollcheck-x").forEach(e=>{const t=e.closest(".moments-tags-wrapper"),n=t?.querySelector(".at-slide-hover"),o=()=>{const t=e.scrollWidth>e.clientWidth;n&&(n.style.display=t?"inline-flex":"none")},i=()=>{const t=e.querySelector(".tag-item.active");if(!t)return;const n=e.getBoundingClientRect(),o=t.getBoundingClientRect();if(o.right>n.right){const t=o.right-n.right;e.scrollLeft+=t+20}else if(o.left<n.left){const t=n.left-o.left;e.scrollLeft-=t+20}};e.addEventListener("wheel",t=>{0!==t.deltaY&&(t.preventDefault(),e.scrollLeft+=t.deltaY)},{passive:!1});let s=0,a=0;e.addEventListener("touchstart",e=>{s=e.touches[0].clientX,a=e.touches[0].clientY},{passive:!0}),e.addEventListener("touchmove",t=>{const n=t.touches[0].clientX,o=t.touches[0].clientY,i=s-n,c=a-o;Math.abs(i)>Math.abs(c)&&(t.preventDefault(),e.scrollLeft+=i,s=n,a=o)},{passive:!1}),o(),i(),window.addEventListener("resize",o);const c=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"class"===e.attributeName){const t=e.target;t.classList.contains("tag-item")&&t.classList.contains("active")&&setTimeout(()=>i(),100)}})});e.querySelectorAll(".tag-item").forEach(e=>{c.observe(e,{attributes:!0,attributeFilter:["class"]})})})});

